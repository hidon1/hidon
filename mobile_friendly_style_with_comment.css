/* ========================================================== */
/* ===== קובץ עיצוב חיצוני למובייל (גרסה סופית) ===== */
/* ========================================================== */

/* כל הכללים עטופים בתגית מדיה כדי שיפעלו רק במסכים צרים */
@media (max-width: 900px) {

    /* --- הגדרות בסיס, פונטים ומשתני עיצוב --- */
    :root {
        --text-color: #1A5276;
        --card-bg: rgba(255, 255, 255, 0.98);
        --button-bg: linear-gradient(135deg, #4da8da, #2a7ab0);
        --button-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        --answer-border: #d6eaf8;
        --radius: 18px; /* פינות מעוגלות */
    }

    /* --- הגדרות גוף ומניעת גלילה --- */
    body, html {
        font-family: 'Varela Round', sans-serif !important;
        background-color: #eaf2f8;
        color: var(--text-color) !important;
        /* מניעת גלילה בכל העמוד */
        width: 100vw;
        height: 100vh;
        overflow: hidden !important;
        position: fixed; /* מונע גלילה במכשירי iOS */
    }

    body::before {
        background-image: url('backgrounds/main.jpg') !important;
        background-attachment: fixed !important;
        background-size: cover !important;
        background-position: center !important;
    }

    /* הסתרת אלמנטים של מחשב ובאנרים מיותרים */
    #leaderboard-container, #avatar-banner, #welcomeBanner, #successMessage { 
        display: none !important;
    }

    /* --- עיצוב ממשק עליון (מטבעות, השתק) --- */
    #user-info-container {
        position: fixed !important;
        top: 15px !important;
        right: 15px !important;
        z-index: 100 !important;
        transform: scale(0.9); /* הקטנה של האייקון */
        transform-origin: top right;
    }

    #muteButton {
        display: block !important;
        position: fixed !important;
        top: 15px !important;
        left: 15px !important;
        z-index: 100 !important;
        background: var(--card-bg) !important; 
        color: var(--text-color) !important;
        padding: 8px 12px !important;
        border-radius: var(--radius) !important;
        font-size: 0.9rem !important;
        border: 1px solid #ddd !important;
        margin-top: 0 !important; /* איפוס המיקום הקודם */
    }

    /* --- עיצוב אחיד למסכים (פתיחה, סיום) --- */
    .screen-card {
        padding: 25px !important;
        background: var(--card-bg) !important;
        border-radius: var(--radius) !important;
        width: 90vw !important;
        max-width: 400px !important;
        box-shadow: 0 8px 30px rgba(0,0,0,0.1) !important;
    }
    
    #startScreen h1 {
        font-family: 'Frank Ruhl Libre', serif !important;
        font-size: 2.5rem !important; /* התאמת גודל למובייל */
        color: var(--text-color) !important;
    }

    #startScreen #startBtn {
        padding: 15px 40px !important;
        font-size: 1.6rem !important;
        width: 80% !important;
        max-width: 320px !important;
        background: var(--button-bg) !important;
        box-shadow: var(--button-shadow) !important;
    }
    
    #failScreen h2, #successScreen h2, #endScreen h2 { font-size: 2rem !important; }
    #failText, #endScreen p, #endScreen h3 { font-size: 1rem !important; }
    #retryBtn, #nextStageBtn, #endScreen .button { font-size: 1.2rem !important; padding: 12px 30px !important; }

    /* --- פריסת Flexbox חדשה למסך החידון (התיקון המרכזי) --- */
    #quizContainer {
        display: flex !important;
        flex-direction: column !important;
        height: 100vh !important;
        box-sizing: border-box !important;
        padding: 65px 0 15px 0 !important; /* מרווח למעלה ולמטה */
        justify-content: space-between !important;
        gap: 10px;
    }

    #quizContainer > * {
        width: 92vw !important;
        margin-left: auto !important;
        margin-right: auto !important;
        flex-shrink: 0 !important; /* מונע מהאלמנטים להתכווץ */
    }
    
    #questionText {
        padding: 15px !important;
        font-size: 1.25rem !important;
        border-radius: var(--radius) !important;
        background: var(--card-bg) !important;
        border: 2px solid var(--answer-border) !important;
        box-shadow: none !important;
    }

    #progressBarContainer {
        height: 12px !important;
        margin-top: 0 !important;
        margin-bottom: 0 !important;
    }

    .answer-grid {
        flex-grow: 1 !important; /* החלק הגמיש שתופס את שאר המקום */
        display: flex !important;
        flex-direction: column !important;
        gap: 10px !important;
        overflow-y: auto !important; /* מאפשר גלילה רק אם התשובות ארוכות מדי */
        justify-content: center !important;
        padding: 5px 0;
    }

    .answer {
        width: 100% !important;
        padding: 12px 10px !important;
        font-size: 1.1rem !important;
        min-height: 50px !important;
        background: white !important;
        border: 2px solid var(--answer-border) !important;
        border-radius: var(--radius) !important;
        font-family: 'Varela Round', sans-serif !important;
        color: #34495e !important;
    }
    
    #dashboard {
        font-size: 0.8rem !important;
        padding: 8px !important;
        border-radius: var(--radius) !important;
        background: rgba(28, 61, 90, 0.95) !important;
        line-height: 1.4 !important;
        font-family: 'Varela Round', sans-serif !important;
    }

    #skipWrapper {
        margin-top: auto !important; /* דוחף אותו מעל הדשבורד */
        padding-top: 10px !important;
    }
    #skipButton, #hintButton {
        width: 48% !important;
        padding: 10px 5px !important;
        font-size: 0.9rem !important;
    }

    /* --- מצב מאוזן (Landscape) --- */
    @media (orientation: landscape) and (max-height: 500px) {
        #quizContainer { padding: 55px 0 10px 0 !important; gap: 5px !important; }
        .top-ui-container { top: 10px !important; }
        
        #questionText { font-size: 1rem !important; padding: 8px !important; }
        .answer-grid {
            display: grid !important;
            grid-template-columns: 1fr 1fr !important;
            gap: 8px !important;
        }
        .answer { min-height: 40px !important; font-size: 0.8rem !important; padding: 5px !important; }
        #dashboard { padding: 4px !important; font-size: 0.7rem !important; }
    }
}
